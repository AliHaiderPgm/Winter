import{g as U,e as c,c as le,b as se}from"./@babel-43e769cc.js";import{r as a}from"./react-52c5f799.js";import{P as we}from"./@rc-component-d028c13d.js";import{b as be,y as Me,K as re,a as ce}from"./rc-util-49c06749.js";import{c as z}from"./classnames-5da7e38f.js";import{C as ue}from"./rc-motion-6c938c71.js";var de=a.createContext(null),ge=function(n){var u=n.prefixCls,C=n.className,d=n.style,v=n.children,l=n.containerRef,i=n.onMouseEnter,s=n.onMouseOver,N=n.onMouseLeave,f=n.onClick,x=n.onKeyDown,b=n.onKeyUp,O={onMouseEnter:i,onMouseOver:s,onMouseLeave:N,onClick:f,onKeyDown:x,onKeyUp:b};return a.createElement(a.Fragment,null,a.createElement("div",U({className:z("".concat(u,"-content"),C),style:c({},d),"aria-modal":"true",role:"dialog",ref:l},O),v))};function ve(e){return typeof e=="string"&&String(Number(e))===e?(be(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var fe={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Ee(e,n){var u,C,d,v,l=e.prefixCls,i=e.open,s=e.placement,N=e.inline,f=e.push,x=e.forceRender,b=e.autoFocus,O=e.keyboard,I=e.rootClassName,F=e.rootStyle,R=e.zIndex,T=e.className,A=e.style,M=e.motion,P=e.width,W=e.height,B=e.children,V=e.contentWrapperStyle,X=e.mask,Y=e.maskClosable,j=e.maskMotion,q=e.maskClassName,G=e.maskStyle,g=e.afterOpenChange,h=e.onClose,J=e.onMouseEnter,Q=e.onMouseOver,H=e.onMouseLeave,Z=e.onClick,p=e.onKeyDown,m=e.onKeyUp,E=a.useRef(),y=a.useRef(),L=a.useRef();a.useImperativeHandle(n,function(){return E.current});var ee=function(r){var K=r.keyCode,D=r.shiftKey;switch(K){case re.TAB:{if(K===re.TAB){if(!D&&document.activeElement===L.current){var te;(te=y.current)===null||te===void 0||te.focus({preventScroll:!0})}else if(D&&document.activeElement===y.current){var oe;(oe=L.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{h&&O&&(r.stopPropagation(),h(r));break}}};a.useEffect(function(){if(i&&b){var t;(t=E.current)===null||t===void 0||t.focus({preventScroll:!0})}},[i]);var ne=a.useState(!1),ae=le(ne,2),_=ae[0],S=ae[1],o=a.useContext(de),$;f===!1?$={distance:0}:f===!0?$={}:$=f||{};var k=(u=(C=(d=$)===null||d===void 0?void 0:d.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&u!==void 0?u:180,me=a.useMemo(function(){return{pushDistance:k,push:function(){S(!0)},pull:function(){S(!1)}}},[k]);a.useEffect(function(){if(i){var t;o==null||(t=o.push)===null||t===void 0||t.call(o)}else{var r;o==null||(r=o.pull)===null||r===void 0||r.call(o)}},[i]),a.useEffect(function(){return function(){var t;o==null||(t=o.pull)===null||t===void 0||t.call(o)}},[]);var ye=X&&a.createElement(ue,U({key:"mask"},j,{visible:i}),function(t,r){var K=t.className,D=t.style;return a.createElement("div",{className:z("".concat(l,"-mask"),K,q),style:c(c({},D),G),onClick:Y&&i?h:void 0,ref:r})}),Ce=typeof M=="function"?M(s):M,w={};if(_&&k)switch(s){case"top":w.transform="translateY(".concat(k,"px)");break;case"bottom":w.transform="translateY(".concat(-k,"px)");break;case"left":w.transform="translateX(".concat(k,"px)");break;default:w.transform="translateX(".concat(-k,"px)");break}s==="left"||s==="right"?w.width=ve(P):w.height=ve(W);var he={onMouseEnter:J,onMouseOver:Q,onMouseLeave:H,onClick:Z,onKeyDown:p,onKeyUp:m},ke=a.createElement(ue,U({key:"panel"},Ce,{visible:i,forceRender:x,onVisibleChanged:function(r){g==null||g(r)},removeOnLeave:!1,leavedClassName:"".concat(l,"-content-wrapper-hidden")}),function(t,r){var K=t.className,D=t.style;return a.createElement("div",U({className:z("".concat(l,"-content-wrapper"),K),style:c(c(c({},w),D),V)},Me(e,{data:!0})),a.createElement(ge,U({containerRef:r,prefixCls:l,className:T,style:A},he),B))}),ie=c({},F);return R&&(ie.zIndex=R),a.createElement(de.Provider,{value:me},a.createElement("div",{className:z(l,"".concat(l,"-").concat(s),I,(v={},se(v,"".concat(l,"-open"),i),se(v,"".concat(l,"-inline"),N),v)),style:ie,tabIndex:-1,ref:E,onKeyDown:ee},ye,a.createElement("div",{tabIndex:0,ref:y,style:fe,"aria-hidden":"true","data-sentinel":"start"}),ke,a.createElement("div",{tabIndex:0,ref:L,style:fe,"aria-hidden":"true","data-sentinel":"end"})))}var Se=a.forwardRef(Ee),Pe=function(n){var u=n.open,C=u===void 0?!1:u,d=n.prefixCls,v=d===void 0?"rc-drawer":d,l=n.placement,i=l===void 0?"right":l,s=n.autoFocus,N=s===void 0?!0:s,f=n.keyboard,x=f===void 0?!0:f,b=n.width,O=b===void 0?378:b,I=n.mask,F=I===void 0?!0:I,R=n.maskClosable,T=R===void 0?!0:R,A=n.getContainer,M=n.forceRender,P=n.afterOpenChange,W=n.destroyOnClose,B=n.onMouseEnter,V=n.onMouseOver,X=n.onMouseLeave,Y=n.onClick,j=n.onKeyDown,q=n.onKeyUp,G=a.useState(!1),g=le(G,2),h=g[0],J=g[1],Q=a.useState(!1),H=le(Q,2),Z=H[0],p=H[1];ce(function(){p(!0)},[]);var m=Z?C:!1,E=a.useRef(),y=a.useRef();ce(function(){m&&(y.current=document.activeElement)},[m]);var L=function(_){var S;if(J(_),P==null||P(_),!_&&y.current&&!(!((S=E.current)===null||S===void 0)&&S.contains(y.current))){var o;(o=y.current)===null||o===void 0||o.focus({preventScroll:!0})}};if(!M&&!h&&!m&&W)return null;var ee={onMouseEnter:B,onMouseOver:V,onMouseLeave:X,onClick:Y,onKeyDown:j,onKeyUp:q},ne=c(c({},n),{},{open:m,prefixCls:v,placement:i,autoFocus:N,keyboard:x,width:O,mask:F,maskClosable:T,inline:A===!1,afterOpenChange:L,ref:E},ee);return a.createElement(we,{open:m||M||h,autoDestroy:!1,getContainer:A,autoLock:F&&(m||h)},a.createElement(Se,ne))};export{Pe as D};
