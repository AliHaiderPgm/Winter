import{c as M,e as $,h as G,g as L,b as P,d as z}from"./@babel-43e769cc.js";import{r as a}from"./react-52c5f799.js";import{c as I}from"./classnames-5da7e38f.js";import{a as H,k as B,p as J,x as K}from"./rc-util-49c06749.js";import{C as O}from"./rc-motion-6c938c71.js";var q=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},C=function(e){return e!==void 0?"".concat(e,"px"):void 0};function Q(t){var e=t.prefixCls,u=t.containerRef,o=t.value,v=t.getValueIndex,r=t.motionName,g=t.onMotionStart,h=t.onMotionEnd,s=t.direction,x=a.useRef(null),R=a.useState(o),S=M(R,2),b=S[0],k=S[1],y=function(m){var n,f=v(m),d=(n=u.current)===null||n===void 0?void 0:n.querySelectorAll(".".concat(e,"-item"))[f];return(d==null?void 0:d.offsetParent)&&d},T=a.useState(null),p=M(T,2),i=p[0],w=p[1],V=a.useState(null),A=M(V,2),l=A[0],N=A[1];H(function(){if(b!==o){var c=y(b),m=y(o),n=q(c),f=q(m);k(o),w(n),N(f),c&&m?g():h()}},[o]);var j=a.useMemo(function(){return C(s==="rtl"?-(i==null?void 0:i.right):i==null?void 0:i.left)},[s,i]),W=a.useMemo(function(){return C(s==="rtl"?-(l==null?void 0:l.right):l==null?void 0:l.left)},[s,l]),E=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},X=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},_=function(){w(null),N(null),h()};return!i||!l?null:a.createElement(O,{visible:!0,motionName:r,motionAppear:!0,onAppearStart:E,onAppearActive:X,onVisibleChanged:_},function(c,m){var n=c.className,f=c.style,d=$($({},f),{},{"--thumb-start-left":j,"--thumb-start-width":C(i==null?void 0:i.width),"--thumb-active-left":W,"--thumb-active-width":C(l==null?void 0:l.width)}),F={ref:B(x,m),style:d,className:I("".concat(e,"-thumb"),n)};return a.createElement("div",F)})}var U=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Y(t){if(typeof t.title<"u")return t.title;if(z(t.label)!=="object"){var e;return(e=t.label)===null||e===void 0?void 0:e.toString()}}function Z(t){return t.map(function(e){if(z(e)==="object"&&e!==null){var u=Y(e);return $($({},e),{},{title:u})}return{label:e==null?void 0:e.toString(),title:e==null?void 0:e.toString(),value:e}})}var ee=function(e){var u=e.prefixCls,o=e.className,v=e.disabled,r=e.checked,g=e.label,h=e.title,s=e.value,x=e.onChange,R=function(b){v||x(b,s)};return a.createElement("label",{className:I(o,P({},"".concat(u,"-item-disabled"),v))},a.createElement("input",{className:"".concat(u,"-item-input"),type:"radio",disabled:v,checked:r,onChange:R}),a.createElement("div",{className:"".concat(u,"-item-label"),title:h},g))},D=a.forwardRef(function(t,e){var u,o,v=t.prefixCls,r=v===void 0?"rc-segmented":v,g=t.direction,h=t.options,s=t.disabled,x=t.defaultValue,R=t.value,S=t.onChange,b=t.className,k=b===void 0?"":b,y=t.motionName,T=y===void 0?"thumb-motion":y,p=G(t,U),i=a.useRef(null),w=a.useMemo(function(){return B(i,e)},[i,e]),V=a.useMemo(function(){return Z(h)},[h]),A=J((u=V[0])===null||u===void 0?void 0:u.value,{value:R,defaultValue:x}),l=M(A,2),N=l[0],j=l[1],W=a.useState(!1),E=M(W,2),X=E[0],_=E[1],c=function(f,d){s||(j(d),S==null||S(d))},m=K(p,["children"]);return a.createElement("div",L({},m,{className:I(r,(o={},P(o,"".concat(r,"-rtl"),g==="rtl"),P(o,"".concat(r,"-disabled"),s),o),k),ref:w}),a.createElement("div",{className:"".concat(r,"-group")},a.createElement(Q,{prefixCls:r,value:N,containerRef:i,motionName:"".concat(r,"-").concat(T),direction:g,getValueIndex:function(f){return V.findIndex(function(d){return d.value===f})},onMotionStart:function(){_(!0)},onMotionEnd:function(){_(!1)}}),V.map(function(n){return a.createElement(ee,L({},n,{key:n.value,prefixCls:r,className:I(n.className,"".concat(r,"-item"),P({},"".concat(r,"-item-selected"),n.value===N&&!X)),checked:n.value===N,onChange:c,disabled:!!s||!!n.disabled}))})))});D.displayName="Segmented";D.defaultProps={options:[]};export{D as S};
